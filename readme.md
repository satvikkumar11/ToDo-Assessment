# Todo App

This project is for managing todos. It allows users to create, read, update, delete, and summarize their tasks. The API is built with Node.js, Express, and Firebase Firestore for data storage. It also integrates with Google Generative AI for task summarization and Slack for notifications. For the frontend React.js and Tailwind is used.

## Features

- User authentication (via Firebase-Google)
- CRUD operations for todos (Create, Read, Update, Delete)
- Task summarization using Google Generative AI
- Send summary to Slack channel using incoming webhook.

## Backend Core Functionality: Task Summarization and Slack Integration

One of the key features of this application is its ability to generate a concise summary of a user's pending tasks and send this summary to a designated Slack channel. This is handled by the `/summarize` endpoint.

### 1. Summary Generation

When a user triggers the `/summarize` endpoint:

1.  **Fetch Pending Todos**: The system retrieves all 'pending' todos associated with the authenticated user from the Firestore database.
2.  **Prepare AI Prompt**: A detailed prompt is constructed for the Google Generative AI model (`gemini-2.5-flash-preview-05-20`). This prompt instructs the AI to:
    - Analyze the provided list of pending tasks (titles and descriptions).
    - Identify common themes, priorities, or logical groupings within the tasks.
    - Generate a concise, single-paragraph summary.
    - The summary should present tasks in a coherent and insightful order, not necessarily the order they were inputted.
3.  **Generate Summary**: The prompt, along with the list of pending todos, is sent to the Gemini AI model. The model processes this information and returns a textual summary.

    _Example of how todos are formatted for the AI:_

    ```
    - Task Title 1: Description of task 1
    - Task Title 2: Description of task 2
    ```

### 2. Slack Operation (send message using incoming webhook)

Once the summary is generated by the AI:

1.  **Prepare Slack Message**: The system formats the AI-generated summary into a message payload.
2.  **Send to Slack**: Using an HTTP POST request (via `axios`), the message is sent to a pre-configured Slack Webhook URL.
    - The `SLACK_WEBHOOK_URL` is stored as an environment variable and must be set up in your Slack workspace to receive incoming messages.
    - The message sent to Slack typically looks like:
      ```
      Todo Summary:
      [The AI-generated summary paragraph here]
      ```
3.  Setup the Slack incoming Webhook url: https://api.slack.com/messaging/webhooks

This process ensures that users can get a quick overview of their pending tasks directly in their Slack channel, facilitated by intelligent summarization.

## Setup and Installation

1.  **Clone the repository:**

    ```bash
    git clone <repository-url>
    cd <project-directory>
    ```

2.  **Install dependencies:**

    ```bash
    npm install
    ```

3.  **Set up Firebase:**

    - Create a Firebase project at [https://console.firebase.google.com/](https://console.firebase.google.com/).
    - Add a new web app or use an existing one.
    - Go to Project settings > Service accounts.
    - Generate a new private key and save the JSON file as `firebaseServiceAccountKey.json` in the root of the project.

4.  **Set up Environment Variables:**
    Create a `.env` file in the root of the project and add the following variables:

    ```env
    PORT=3000
    GEMINI_API_KEY=your_google_gemini_api_key
    SLACK_WEBHOOK_URL=your_slack_incoming_webhook_url

    # Firebase client SDK config (if you plan to use client-side auth)
    # These are typically used on the frontend but shown here for completeness if needed.
    # FIREBASE_API_KEY=your_firebase_api_key
    # FIREBASE_AUTH_DOMAIN=your_firebase_auth_domain
    # FIREBASE_PROJECT_ID=your_firebase_project_id
    # FIREBASE_STORAGE_BUCKET=your_firebase_storage_bucket
    # FIREBASE_MESSAGING_SENDER_ID=your_firebase_messaging_sender_id
    # FIREBASE_APP_ID=your_firebase_app_id
    ```

    - `GEMINI_API_KEY`: Your API key for Google Generative AI.
    - `SLACK_WEBHOOK_URL`: The incoming webhook URL from your Slack app.

5.  **Run the application:**
    ```bash
    npm start
    ```
    The server will start on the port specified in your `.env` file (default is 3000).

## API Endpoints

All API endpoints are protected by an authentication middleware that expects a Firebase ID token in the `Authorization` header (e.g., `Authorization: Bearer <token>`).

- `POST /todos`: Add a new todo.
- `GET /todos`: Fetch all todos for the authenticated user.
- `PUT /todos/:id`: Update an existing todo.
- `DELETE /todos/:id`: Delete a todo.
- `POST /summarize`: Generate a summary of pending todos and send it to Slack.

Refer to `API_DOCUMENTATION.md` for more detailed information on request/response formats.

## Key Technologies

- **Node.js**: JavaScript runtime environment.
- **Express.js**: Web application framework for Node.js.
- **Firebase Admin SDK**: For server-side Firebase operations (Firestore, Auth).
- **Firestore**: NoSQL document database.
- **Google Generative AI (Gemini)**: For generating task summaries.
- **Axios**: Promise-based HTTP client for sending notifications to Slack.
- **dotenv**: For managing environment variables.
- **CORS**: For handling Cross-Origin Resource Sharing.
